<ENVELOPE>
<HEADER>
<TALLYREQUEST>Import Data</TALLYREQUEST>
</HEADER>
<BODY>
<IMPORTDATA>
<REQUESTDESC>
<REPORTNAME>All Masters</REPORTNAME>
<STATICVARIABLES>
<SVCURRENTCOMPANY>Store M-CET</SVCURRENTCOMPANY>
</STATICVARIABLES>
</REQUESTDESC>
<REQUESTDATA>
<TALLYMESSAGE xmlns:UDF="TallyUDF">
 <VOUCHER REMOTEID="72b010a4-0f26-4654-926b-d506f9f7787b-0002a0c7" VCHTYPE="Sales" ACTION="Create">
  <DATE>20110924</DATE>
  <GUID>72b010a4-0f26-4654-926b-d506f9f7787b-0002a0c7</GUID>
  <VOUCHERTYPENAME>Sales</VOUCHERTYPENAME>
  <VOUCHERNUMBER>18363</VOUCHERNUMBER>
  <PARTYLEDGERNAME>AKHIL.J (ME) 2485</PARTYLEDGERNAME>
  <CSTFORMISSUETYPE/>
  <CSTFORMRECVTYPE/>
  <FBTPAYMENTTYPE>Default</FBTPAYMENTTYPE>
  <VCHGSTCLASS/>
  <DIFFACTUALQTY>No</DIFFACTUALQTY>
  <AUDITED>No</AUDITED>
  <FORJOBCOSTING>No</FORJOBCOSTING>
  <ISOPTIONAL>No</ISOPTIONAL>
  <EFFECTIVEDATE>20110924</EFFECTIVEDATE>
  <USEFORINTEREST>No</USEFORINTEREST>
  <USEFORGAINLOSS>No</USEFORGAINLOSS>
  <USEFORGODOWNTRANSFER>No</USEFORGODOWNTRANSFER>
  <USEFORCOMPOUND>No</USEFORCOMPOUND>
  <ALTERID> 185178</ALTERID>
  <EXCISEOPENING>No</EXCISEOPENING>
  <ISCANCELLED>No</ISCANCELLED>
  <HASCASHFLOW>No</HASCASHFLOW>
  <ISPOSTDATED>No</ISPOSTDATED>
  <USETRACKINGNUMBER>No</USETRACKINGNUMBER>
  <ISINVOICE>Yes</ISINVOICE>
  <MFGJOURNAL>No</MFGJOURNAL>
  <HASDISCOUNTS>No</HASDISCOUNTS>
  <ASPAYSLIP>No</ASPAYSLIP>
  <ISDELETED>No</ISDELETED>
  <ASORIGINAL>No</ASORIGINAL>
  <LEDGERENTRIES.LIST>
   <LEDGERNAME>AKHIL.J (ME) 2485</LEDGERNAME>
   <GSTCLASS/>
   <ISDEEMEDPOSITIVE>Yes</ISDEEMEDPOSITIVE>
   <LEDGERFROMITEM>No</LEDGERFROMITEM>
   <REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>
   <ISPARTYLEDGER>Yes</ISPARTYLEDGER>
   <AMOUNT>-8.00</AMOUNT>
   <BILLALLOCATIONS.LIST>
    <NAME>18363</NAME>
    <BILLTYPE>New Ref</BILLTYPE>
    <AMOUNT>-8.00</AMOUNT>
   </BILLALLOCATIONS.LIST>
  </LEDGERENTRIES.LIST>
  <ALLINVENTORYENTRIES.LIST>
   <STOCKITEMNAME>CELLO GRIPPER PEN</STOCKITEMNAME>
   <ISDEEMEDPOSITIVE>No</ISDEEMEDPOSITIVE>
   <ISAUTONEGATE>No</ISAUTONEGATE>
   <RATE>8.00/Nos</RATE>
   <AMOUNT>8.00</AMOUNT>
   <ACTUALQTY> 1 Nos</ACTUALQTY>
   <BILLEDQTY> 1 Nos</BILLEDQTY>
   <ACCOUNTINGALLOCATIONS.LIST>
    <LEDGERNAME>STUDENTS</LEDGERNAME>
    <GSTCLASS/>
    <ISDEEMEDPOSITIVE>No</ISDEEMEDPOSITIVE>
    <LEDGERFROMITEM>No</LEDGERFROMITEM>
    <REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>
    <ISPARTYLEDGER>No</ISPARTYLEDGER>
    <AMOUNT>8.00</AMOUNT>
   </ACCOUNTINGALLOCATIONS.LIST>
   <BATCHALLOCATIONS.LIST>
    <GODOWNNAME>Main Location</GODOWNNAME>
    <BATCHNAME>Primary Batch</BATCHNAME>
    <DESTINATIONGODOWNNAME>Main Location</DESTINATIONGODOWNNAME>
    <INDENTNO/>
    <ORDERNO/>
    <TRACKINGNUMBER/>
    <AMOUNT>8.00</AMOUNT>
    <ACTUALQTY> 1 Nos</ACTUALQTY>
    <BILLEDQTY> 1 Nos</BILLEDQTY>
   </BATCHALLOCATIONS.LIST>
  </ALLINVENTORYENTRIES.LIST>
 </VOUCHER>
</TALLYMESSAGE>

</REQUESTDATA>
</IMPORTDATA>
</BODY>
</ENVELOPE>

<?php 
$strXML = "<ENVELOPE>
<HEADER>
<TALLYREQUEST>Import Data</TALLYREQUEST>
</HEADER>
<BODY>
<IMPORTDATA>
<REQUESTDESC>
<REPORTNAME>All Masters</REPORTNAME>
<STATICVARIABLES>
<SVCURRENTCOMPANY>BS TECH PTE LTD</SVCURRENTCOMPANY>
</STATICVARIABLES>
</REQUESTDESC>
<REQUESTDATA>
<TALLYMESSAGE xmlns:UDF='TallyUDF'>
 <VOUCHER REMOTEID='72b010a4-0f26-4654-926b-d506f9f7787b-0002a0c7' VCHTYPE='Sales' ACTION='Create'>
  <DATE>30-Sep-2014</DATE>
  <GUID>72b010a4-0f26-4654-926b-d506f9f7787b-0002a0c7</GUID>
  <VOUCHERTYPENAME>Sales</VOUCHERTYPENAME>
  <VOUCHERNUMBER>18363</VOUCHERNUMBER>
  <PARTYLEDGERNAME>123 PTE LTD</PARTYLEDGERNAME>
  <CSTFORMISSUETYPE/>
  <CSTFORMRECVTYPE/>
  <FBTPAYMENTTYPE>Default</FBTPAYMENTTYPE>
  <VCHGSTCLASS/>
  <DIFFACTUALQTY>No</DIFFACTUALQTY>
  <AUDITED>No</AUDITED>
  <FORJOBCOSTING>No</FORJOBCOSTING>
  <ISOPTIONAL>No</ISOPTIONAL>
  <EFFECTIVEDATE>30-Sep-2014</EFFECTIVEDATE>
  <USEFORINTEREST>No</USEFORINTEREST>
  <USEFORGAINLOSS>No</USEFORGAINLOSS>
  <USEFORGODOWNTRANSFER>No</USEFORGODOWNTRANSFER>
  <USEFORCOMPOUND>No</USEFORCOMPOUND>
  <ALTERID> 185178</ALTERID>
  <EXCISEOPENING>No</EXCISEOPENING>
  <ISCANCELLED>No</ISCANCELLED>
  <HASCASHFLOW>No</HASCASHFLOW>
  <ISPOSTDATED>No</ISPOSTDATED>
  <USETRACKINGNUMBER>No</USETRACKINGNUMBER>
  <ISINVOICE>Yes</ISINVOICE>
  <MFGJOURNAL>No</MFGJOURNAL>
  <HASDISCOUNTS>No</HASDISCOUNTS>
  <ASPAYSLIP>No</ASPAYSLIP>
  <ISDELETED>No</ISDELETED>
  <ASORIGINAL>No</ASORIGINAL>
  <LEDGERENTRIES.LIST>
   <LEDGERNAME>123 PTE LTD</LEDGERNAME>
   <GSTCLASS/>
   <ISDEEMEDPOSITIVE>Yes</ISDEEMEDPOSITIVE>
   <LEDGERFROMITEM>No</LEDGERFROMITEM>
   <REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>
   <ISPARTYLEDGER>Yes</ISPARTYLEDGER>
   <AMOUNT>-800.00</AMOUNT>
   <BILLALLOCATIONS.LIST>
    <NAME>18363</NAME>
    <BILLTYPE>New Ref</BILLTYPE>
    <AMOUNT>-800.00</AMOUNT>
   </BILLALLOCATIONS.LIST>
  </LEDGERENTRIES.LIST>
  </VOUCHER>
</TALLYMESSAGE>

</REQUESTDATA>
</IMPORTDATA>
</BODY>
</ENVELOPE>";

$server = "http://203.175.170.64:8000/";
//$server = "http://localhost:9002/";
     $headers = array( "Content-type: text/xml" ,"Content-length: ".strlen($strXML) ,"Connection: close" );

    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL,$server);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 20);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $strXML);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    $server_output = curl_exec($ch);



    if(curl_errno($ch)){
        echo curl_error($ch);
        echo " $server  something went wrong..... try later ";
        //if($_GET[counter]==$_GET[total])
        //echo 'done###';
    }else{
		echo 'done###';
        curl_close($ch);
    }


?>